kjvm-objs := core/domain.o core/jem.o core/jemUPipe.o core/malloc.o core/jar.o \
                core/thread.o core/load.o core/call.o core/libcache.o \
                core/portal.o core/call.o core/exception_handler.o \
                gc/gc.o gc/gc_alloc.o

ifeq ($(CONFIG_JEM_ENABLE_GC),y)
kjvm-objs += gc/gc_normal.o gc/gc_stack.o gc/gc_impl.o 
endif


kjvm.o: $(kjvm-objs)
	$(LD) -r -o $@ $(kjvm-objs)

obj-$(CONFIG_JEM) += kjvm.o

EXTRA_CFLAGS += -I/opt/sombrio/jcore/staging/usr/xenomai/include -I/vesta-work/chris/jem/jvm/kjvm/include

